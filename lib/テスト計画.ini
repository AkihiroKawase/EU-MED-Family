````
# EMCA v1 テスト計画
## Notes
- 対象OS/端末: iOS 18以上。iPhone/iPad対応（iPhone: 縦のみ／iPad: 縦横両対応）
- 実機: iPhone 16e、iPad 第10世代、iPhone 11 Pro（シミュレータ併用）
- 環境: ステージング（Firebase別プロジェクト＋NotionステージングDB＋APNsサンドボックス）
- 外部テスト期間: 2025/11/21（金）〜 2025/12/04（木）
- 不具合管理: Notionデータベース（バグ管理ボード）
- Go/No-Go基準: Blocker=0、Critical=0、Major≤3（主要フロー阻害なし）、Minor≤10

# Tasks
- [ ] 1.0 テスト準備
  - [ ] 1.1 テストアカウント作成（一般/管理者）
  - [ ] 1.2 ステージング用 Notion DB/タグDB/カテゴリ初期データ投入
  - [ ] 1.3 ステージング用 Firebase 設定（FCM/APNs、Security Rules、Remote Config等）
  - [ ] 1.4 テスト投稿テンプレート（カバー有/無、タグ境界、埋め込み可/不可）用意
  - [ ] 1.5 TestFlight配信設定（外部テスター招待/メタ記載）

- [ ] 2.0 認証・アクセス制御
  - [ ] 2.1 未ログインで一覧/詳細がブロックされログイン導線表示
  - [ ] 2.2 ログイン後に一覧/詳細/投稿作成/コメント/いいね/ブックマーク操作が可能

- [ ] 3.0 投稿作成（Notion保存）
  - [ ] 3.1 タイトル必須（≤60文字）バリデーション
  - [ ] 3.2 Canva「スマート埋め込みURL」のみ許可（その他はエラー）
  - [ ] 3.3 カテゴリ任意／タグ1〜5件必須の検証
  - [ ] 3.4 サマリー任意（≤160文字）の検証
  - [ ] 3.5 サーバー側で `published_at` をUTC設定
  - [ ] 3.6 カバー画像（PNG/JPG、≤5MB、16:9以外は中央トリミング）アップロード→Storage URLをNotion保存

- [ ] 4.0 一覧（ページ番号式20件）
  - [ ] 4.1 `published_at` 新しい順で安定表示（未来日時も表示）
  - [ ] 4.2 ページ切替（前/次）と件数表示の整合
  - [ ] 4.3 各カードにタイトル/（任意）カバー/いいね数が表示
  - [ ] 4.4 いいね/ブックマークのトグル操作が即時反映（失敗時ロールバック）

- [ ] 5.0 検索・絞り込み（AND結合）
  - [ ] 5.1 キーワードはメタのみ（タイトル/サマリー/カテゴリ名/タグ名）対象
  - [ ] 5.2 カテゴリ単一選択で一致
  - [ ] 5.3 タグはOR条件（いずれか一致）
  - [ ] 5.4 キーワード×カテゴリ×タグがANDで同時適用

- [ ] 6.0 詳細（WebView＋ネイティブ操作）
  - [ ] 6.1 Canvaスマート埋め込みがWebViewで表示
  - [ ] 6.2 埋め込みブロック時に警告＋「外部ブラウザで開く」ボタン
  - [ ] 6.3 いいね/ブックマーク/コメントボタンが適切な位置に表示

- [ ] 7.0 いいね/ブックマーク（投稿のみ）
  - [ ] 7.1 いいねはトグル可（多重防止）
  - [ ] 7.2 `postStats.likesCount` がトグルに応じ増減
  - [ ] 7.3 一覧のいいね数と`postStats`が一致
  - [ ] 7.4 ブックマークのトグル（一覧/詳細の両方）動作

- [ ] 8.0 コメント（無制限ネスト、古い順）
  - [ ] 8.1 親コメントのページネーション（20件/ページ）表示
  - [ ] 8.2 返信は親ごと折りたたみ→展開で都度読み込み
  - [ ] 8.3 テキストのみ（≤1000文字、改行可）バリデーション
  - [ ] 8.4 プロフィール名/アイコンが最新プロフィールで表示
  - [ ] 8.5 削除はソフト削除（本文「[削除済み]」、子は残す）
  - [ ] 8.6 管理者は非表示/ソフト削除が可能（一般ユーザーから非表示）

- [ ] 9.0 通知（全体ON/OFF、既定ON）
  - [ ] 9.1 自分の投稿への新規コメントで通知
  - [ ] 9.2 自分のコメントへの返信で通知
  - [ ] 9.3 自分の投稿へのいいねで通知
  - [ ] 9.4 通知OFF時は配信されない
  - [ ] 9.5 通知タップで詳細WebViewへ遷移（コメントパネルは自動展開なし）

- [ ] 10.0 マイページ
  - [ ] 10.1 自分の投稿一覧（並び/件数/ページング）
  - [ ] 10.2 通知履歴一覧（既読状態/時系列）

- [ ] 11.0 タイムゾーン/表示
  - [ ] 11.1 `published_at` はUTC保存
  - [ ] 11.2 端末ローカル時間に変換して表示（一覧/詳細で整合）

- [ ] 12.0 キャッシュ/整合性
  - [ ] 12.1 一覧API TTL=60秒、詳細API TTL=300秒で応答
  - [ ] 12.2 投稿作成/削除で該当詳細＋一覧キャッシュが即時パージ
  - [ ] 12.3 パージ後の再取得で最新が表示

- [ ] 13.0 端末・画面向き・解像度
  - [ ] 13.1 iPhone 16e（縦）で主要フロー確認
  - [ ] 13.2 iPhone 11 Pro（縦）で主要フロー確認
  - [ ] 13.3 iPad 第10世代（縦/横）でレイアウト崩れ/回転時の再配置確認
  - [ ] 13.4 シミュレータで代表機種/解像度を補完チェック

- [ ] 14.0 例外/エラー/境界値
  - [ ] 14.1 タグ0件/6件以上はエラー（1〜5のみ許可）
  - [ ] 14.2 タイトル61文字/サマリー161文字/コメント1001文字でエラー
  - [ ] 14.3 非Canva URL投稿はエラー
  - [ ] 14.4 カバー画像: 非PNG/JPG、>5MB、アスペクト不一致（トリミング適用）動作
  - [ ] 14.5 権限外操作（未ログイン投稿/コメント/いいね/ブクマ）がブロック
  - [ ] 14.6 Notion/API一時失敗時のユーザー表示（リトライ/案内）
  - [ ] 14.7 ネットワーク不安定時の再試行/空状態/フォールバック

- [ ] 15.0 安定性・パフォーマンス（目視/定性）
  - [ ] 15.1 一覧/詳細/コメント開閉で顕著なカクつき無し
  - [ ] 15.2 WebView初期表示が許容体感で完了（Wi‑Fi/4Gで確認）
  - [ ] 15.3 連続操作でクラッシュ/メモリ急増が無い

- [ ] 16.0 外部テスト運用（11/21–12/04）
  - [ ] 16.1 外部テスター招待・導線（テスト観点の共有）
  - [ ] 16.2 不具合報告テンプレ（再現手順/端末/ログ/スクショ）をNotionに用意
  - [ ] 16.3 日次トリアージ（重大度付与/修正計画）
  - [ ] 16.4 週次リグレッション（主要フロー一巡）

- [ ] 17.0 リグレッション/受け入れ
  - [ ] 17.1 受け入れ基準チェックリストに基づく最終確認
  - [ ] 17.2 Go/No-Go判定（基準: Blocker=0, Critical=0, Major≤3, Minor≤10）
  - [ ] 17.3 提出前最終通しテスト（ログイン→投稿→一覧→詳細→コメント→通知→マイページ）

- [ ] 18.0 成果物
  - [ ] 18.1 テスト完了レポート（不具合件数/重大度分布/対応状況/残課題）
  - [ ] 18.2 スクリーンショット/再現動画（主要フロー・代表機種）
  - [ ] 18.3 Notionバグボードの最終スナップショット保存
````